<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="lab4.css" />
  </head>
  <body>
    <dialog id="regDialog" open>
      <form id="regForm">
        <!-- Section 1 -->
        <fieldset>
          <legend>Section 1</legend>
          <label for="username" class="required">Username :</label>
          <input type="text" id="username" name="username" required />

          <label for="password" class="required">Password :</label>
          <input
            type="password"
            id="password"
            name="password"
            required
            pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!#%&*_=+\-\$\^]).{8,12}$"
            title="8 to 12 characters long and contain at least one of: a lower case letter, an upper case letter, a digit and a special character"
          />

          <label for="email" class="required">Email :</label>
          <input type="email" id="email" name="email" required />

          <label for="dob">Date of Birth:</label>
          <input
            type="text"
            id="dob"
            name="dob"
            placeholder="DD/MM/YY"
            title="Enter in DD/MM/YY format"
          />
        </fieldset>

        <!-- Section 2-->
        <fieldset>
          <legend>Section 2</legend>

          <!-- Purpose checkboxes -->
          <p>Purpose for joining:</p>

          <input type="checkbox" id="work" name="purpose" value="work" />
          <label for="work">Work</label>

          <input type="checkbox" id="hobbies" name="purpose" value="hobbies" />
          <label for="hobbies">Hobbies</label>

          <input
            type="checkbox"
            id="entertainment"
            name="purpose"
            value="entertainment"
          />
          <label for="entertainment">Entertainment</label>

          <!-- Volunteering availability -->
          <p>Volunteering availability:</p>
          <input type="radio" id="none" name="volunteer" value="none" checked />
          <label for="none">Not available</label>

          <input type="radio" id="onehour" name="volunteer" value="1 hour" />
          <label for="onehour">1 hour</label>

          <input
            type="radio"
            id="twothree"
            name="volunteer"
            value="2-3 hours"
          />
          <label for="twothree">2–3 hours</label>

          <input
            type="radio"
            id="fourfive"
            name="volunteer"
            value="4-5 hours"
          />
          <label for="fourfive">4–5 hours</label>
          <br /><br />

          <!-- profile image -->
          <label for="profile">Profile Image (optional):</label>
          <input type="file" id="profile" name="profile" accept="image/*" />
        </fieldset>

        <button type="submit">Submit</button>
      </form>
    </dialog>

    <script>
      // password validation
      form.addEventListener("submit", (event) => {
        const value = password.value;

        const regex =
          /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!#%&*_=+\-\$\^]).{8,12}$/;

        if (!regex.test(value)) {
          alert(
            "Password must be 8–12 characters and include lowercase, uppercase, a number, and a special character (! # % & * _ = + - $ ^)"
          );
          event.preventDefault();
          return;
        }

        alert("Form submitted successfully!");
      });
    </script>

    <script>
      // Form submission and data display
      const dialog = document.getElementById("regDialog");
      const form = document.getElementById("regForm");

      form.addEventListener("submit", (event) => {
        event.preventDefault();

        const formData = new FormData(form);
        const output = document.createElement("div");
        output.innerHTML = "<h2>Registration Confirmed</h2>";

        const list = document.createElement("ul");
        formData.forEach((value, key) => {
          if (value instanceof File && value.name) {
          } else {
            const item = document.createElement("li");
            item.textContent = `${key}: ${value}`;
            list.appendChild(item);
          }
        });
        output.appendChild(list);

        // image display
        const file = formData.get("profile");
        if (file && file.name) {
          const reader = new FileReader();
          reader.onload = function (e) {
            const img = document.createElement("img");
            img.src = e.target.result;
            img.alt = "Uploaded Profile Image";
            img.style.maxWidth = "150px";
            img.style.marginTop = "10px";
            output.appendChild(img);
          };
          reader.readAsDataURL(file);
        }

        dialog.innerHTML = "";
        dialog.appendChild(output);
      });
    </script>
  </body>
</html>
